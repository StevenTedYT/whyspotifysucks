const translations = {
    'fr': {
        headTitle: "Pourquoi Spotify c'est de la merde?",
        headDescription: "Pourquoi Spotify c'est de la merde? C'est une bonne question, voici pourquoi.",
        bodyTitle: "Mmh pourquoi SpOwOtify~ c'est de la merde?",
        bodySubtitle: "Clique n'importe où pour lancer la musique kawaii uwu~",
        bodyElements:[
            "Le prix : C'est en fait l'une des plateformes de streaming les plus chères.",
            "Ils ne paient pas les petits artistes. Ce sont eux qui ont besoin d'argent pour améliorer leurs compétences/qualité et leurs stratégies de promotion.",
            "Le design est dépassé et nul (ça dépend des goûts, mais c'est mon avis perso).",
            "Tu dois payer pour voir les paroles d'une chanson (genre c'est sérieux ça ??)",
            "Afficher le nombre de streams influence si les gens écoutent une chanson ou non. On a tendance à penser que si une chanson n'a pas beaucoup de streams, elle doit être nulle, ce qui n'est pas forcément vrai. Quand les stats ne sont pas visibles, on écoute la musique sans idée préconçue et on se fait un avis basé sur la musique elle-même, pas sur ses statistiques.",
            "Les algorithmes sont pourris et manipulés par les grandes maisons de disques et les boîtes de pub comme Coca. Plus d'infos : ",
            "Pas d'audio en qualité sans perte (Lossless Audio) pour l'instant, et tu devras peut-être payer en plus pour ça à l'avenir.",
            "Pas de Dolby Atmos, alias Spatial Audio.",
            "Pas de clips vidéo.",
            "Pas de sets de DJ ou de concerts.",
            "Pas de synchronisation pour la musique locale (par exemple, si tu ajoutes de la musique, elle n'est pas automatiquement ajoutée sur tous tes appareils).",
            "Pas de playlists intelligentes (playlists automatiques personnalisées basées sur des règles que tu choisis).",
            "Géré par des gens qui bossent dans la pub, pas dans l'industrie musicale.",
            "Des royalties super basses pour les artistes (l'un des plus bas, d'ailleurs).",
            "Qualité audio médiocre (320 kbps max) ; Apple Music, Deezer, et Tidal offrent une bien meilleure qualité audio.",
            "Les artistes doivent payer pour synchroniser les paroles avec leur musique.",
            "Les artistes ne peuvent pitcher qu'un seul morceau par album, donc un seul morceau peut être mis en avant dans les playlists algorithmiques comme 'Discover Weekly' ou 'Release Radar'.",
            "Pas de cohérence du BPM ou de la tonalité dans le système de recommandations quand Spotify choisit la musique.",
            "Pas de vraie option de lecture aléatoire.",
            "La version gratuite n'est vraiment pas utilisable. Je comprends qu'ils doivent générer des revenus pour les artistes, mais il vaudrait peut-être mieux offrir uniquement une version premium. Les pubs, c'est une chose, mais beaucoup de fonctionnalités sont bloquées derrière un paywall.",
            "Les podcasts, c'est quoi ce délire ? C'est censé être une plateforme de musique, non ?"
        ],
        bodyFooter: "Fait par <a href=\"https://github.com/untanukii\" target=\"_blank\">tanukii</a> & <a href=\"https://github.com/steventedyt\" target=\"_blank\">StevenTed</a> <br> Si vous aimez cette page, étoilez le dépôt sur <a href=\"https://github.com/steventedyt/whyspotifysucks\" target=\"_blank\">GithUwUb~</a>"
    },
    'es': {
        headTitle: "¿Por qué Spotify es una mierda?",
        headDescription: "¿Por qué Spotify es una mierda? Es una buena pregunta, aquí te explico por qué.",
        bodyTitle: "Mmm ¿por qué Spotify es una mierda?",
        bodySubtitle: "Haz clic en cualquier lugar para reproducir música kawaii uwu~",
        bodyElements: [
            "El precio: De hecho, es una de las plataformas de streaming más caras.",
            "No pagan a los artistas pequeños. Son ellos los que necesitan dinero para mejorar sus habilidades/calidad y estrategias de promoción.",
            "El diseño está anticuado y es feo (esto depende de los gustos, pero es mi opinión personal).",
            "Tienes que pagar para ver las letras de una canción (¿en serio?).",
            "Mostrar el número de reproducciones influye en si la gente escucha una canción o no. Tendemos a pensar que si una canción no tiene muchas reproducciones, debe ser mala, lo cual no es necesariamente cierto. Cuando las estadísticas no son visibles, escuchamos la música con la mente abierta y formamos una opinión basada en la música en sí, no en sus estadísticas.",
            "Los algoritmos son basura y están manipulados por las grandes discográficas y las compañías de publicidad como Coca. Más información:",
            "Actualmente, no hay audio sin pérdida (Lossless Audio), y es posible que tengas que pagar extra por ello en el futuro.",
            "No hay Dolby Atmos, alias Audio Espacial.",
            "No hay videos musicales.",
            "No hay sets de DJ ni conciertos.",
            "No hay sincronización para la música local (por ejemplo, si agregas música, no se añade automáticamente a todos tus dispositivos).",
            "No hay listas de reproducción inteligentes (listas automáticas personalizadas basadas en reglas que elijas).",
            "Gestionado por personas que trabajan en publicidad, no en la industria musical.",
            "Regalías muy bajas para los artistas (una de las más bajas, por cierto).",
            "Calidad de audio mediocre (máximo 320 kbps); Apple Music, Deezer y Tidal ofrecen una calidad de audio mucho mejor.",
            "Los artistas tienen que pagar para sincronizar las letras con su música.",
            "Los artistas solo pueden promocionar una pista por álbum, lo que significa que solo una pista puede aparecer en listas de reproducción algorítmicas como 'Discover Weekly' o 'Release Radar'.",
            "No hay coherencia de BPM o tono en el sistema de recomendaciones cuando Spotify selecciona la música.",
            "No hay una opción de reproducción aleatoria verdadera.",
            "La versión gratuita realmente no es usable. Aunque entiendo que necesitan generar ingresos para los artistas, quizás sería mejor ofrecer solo una versión premium. Los anuncios son una cosa, pero muchas funciones están bloqueadas tras un muro de pago.",
            "¿Podcasts? ¿Qué hacen aquí? Se supone que esta es una plataforma de música, ¿no?"
        ],
        bodyFooter: "Hecho por <a href=\"https://github.com/untanukii\" target=\"_blank\">tanukii</a> & <a href=\"https://github.com/steventedyt\" target=\"_blank\">StevenTed</a> <br> Si te gusta esta página, estrella el repositorio en <a href=\"https://github.com/steventedyt/whyspotifysucks\" target=\"_blank\">GithUwUb~</a>"
    },
    'de': {
        headTitle: "Warum ist Spotify scheiße?",
        headDescription: "Warum ist Spotify scheiße? Das ist eine gute Frage, hier ist der Grund.",
        bodyTitle: "Mmh, warum ist Spotify scheiße?",
        bodySubtitle: "Klicke irgendwo, um die kawaii Musik uwu~ zu starten",
        bodyElements:[
            "Der Preis: Es ist tatsächlich eine der teuersten Streaming-Plattformen.",
            "Sie zahlen den kleinen Künstlern nicht. Diese brauchen das Geld, um ihre Fähigkeiten/Qualität und ihre Promotion-Strategien zu verbessern.",
            "Das Design ist veraltet und schlecht (das ist Geschmackssache, aber das ist meine persönliche Meinung).",
            "Man muss bezahlen, um die Songtexte zu sehen (meinen die das ernst??)",
            "Die Anzeige der Stream-Zahlen beeinflusst, ob Menschen einen Song hören oder nicht. Man neigt dazu zu denken, dass ein Song, der nicht viele Streams hat, schlecht sein muss, was nicht unbedingt stimmt. Wenn die Statistiken nicht sichtbar sind, hört man die Musik ohne Vorurteile und bildet sich eine Meinung basierend auf der Musik selbst, nicht auf ihren Statistiken.",
            "Die Algorithmen sind schlecht und werden von großen Plattenfirmen und Werbefirmen wie Coca manipuliert. Mehr Infos:",
            "Keine verlustfreie Audioqualität (Lossless Audio) momentan, und du musst vielleicht in Zukunft zusätzlich dafür zahlen.",
            "Kein Dolby Atmos, alias Spatial Audio.",
            "Keine Musikvideos.",
            "Keine DJ-Sets oder Konzerte.",
            "Keine Synchronisierung für lokale Musik (zum Beispiel, wenn du Musik hinzufügst, wird sie nicht automatisch auf all deinen Geräten hinzugefügt).",
            "Keine intelligenten Playlists (automatisch personalisierte Playlists basierend auf Regeln, die du auswählst).",
            "Verwaltet von Leuten, die in der Werbung arbeiten, nicht in der Musikindustrie.",
            "Sehr niedrige Royalties für Künstler (eine der niedrigsten überhaupt).",
            "Mediocre Audioqualität (max. 320 kbps); Apple Music, Deezer und Tidal bieten eine viel bessere Audioqualität.",
            "Künstler müssen zahlen, um die Songtexte mit ihrer Musik zu synchronisieren.",
            "Künstler können nur einen Song pro Album pitchen, daher kann nur ein Song in algorithmischen Playlists wie 'Discover Weekly' oder 'Release Radar' hervorgehoben werden.",
            "Keine Konsistenz des BPM oder der Tonart im Empfehlungssystem, wenn Spotify Musik auswählt.",
            "Keine echte Zufallswiedergabe-Option.",
            "Die kostenlose Version ist wirklich nicht nutzbar. Ich verstehe, dass sie Einnahmen für die Künstler generieren müssen, aber es wäre vielleicht besser, nur eine Premium-Version anzubieten. Werbung ist eine Sache, aber viele Funktionen sind hinter einer Paywall verborgen.",
            "Podcasts, was soll das bitte? Es soll doch eine Musikplattform sein, oder?"
        ],
        bodyFooter: "Erstellt von <a href=\"https://github.com/untanukii\" target=\"_blank\">tanukii</a> & <a href=\"https://github.com/steventedyt\" target=\"_blank\">StevenTed</a> <br> Wenn dir diese Seite gefällt, gib dem Repository ein Sternchen auf <a href=\"https://github.com/steventedyt/whyspotifysucks\" target=\"_blank\">GithUwUb~</a>"
    },
    'ja': {
        headTitle: "なんでSpotifyはクソなの？",
        headDescription: "なんでSpotifyはクソなの？それは良い質問、これが理由だよ。",
        bodyTitle: "うーん、なんでSpOwOtify~はクソなの？",
        bodySubtitle: "どこでもクリックして、かわいい音楽を再生しよう！",
        bodyElements:[
            "料金: 実は一番高いストリーミングサービスの一つだよ。",
            "小さなアーティストにはお金を払わない。彼らこそスキルやクオリティを向上させたり、プロモーションの戦略を練るためにお金が必要なのに。",
            "デザインが古くてダサい（好みによるけど、これが俺の意見）。",
            "歌詞を見るためにお金を払わないといけない（マジでそれあり？）。",
            "ストリーム数を表示するのが、曲を聴くかどうかに影響する。少ないストリーム数の曲はダメだと思われがちだけど、それは間違い。統計が見えないと、先入観なしで音楽を聴けて、自分の意見を持てる。",
            "アルゴリズムがゴミで、大手レコード会社やコカコーラみたいな広告会社に操作されてる。もっと詳しくは",
            "ロスレスオーディオがまだないし、将来それに追加料金がかかるかもしれない。",
            "Dolby Atmos（空間オーディオ）がない。",
            "ビデオクリップがない。",
            "DJセットやコンサートがない。",
            "ローカルの音楽の同期ができない（例えば、曲を追加しても、全デバイスに自動で追加されない）。",
            "スマートプレイリストがない（自分で設定したルールに基づいて自動で作成されるプレイリスト）。",
            "音楽業界じゃなくて広告業界の人たちが運営してる。",
            "アーティストへのロイヤリティがめっちゃ低い（しかも一番低い方）。",
            "音質が悪い（最大320 kbps）；Apple Music、Deezer、Tidalの方がはるかに良い音質を提供してる。",
            "アーティストが歌詞と音楽を同期させるためにはお金を払わないといけない。",
            "アーティストはアルバムごとに一曲しかプレイリストに提案できないから、‘Discover Weekly’や‘Release Radar’みたいなアルゴリズムプレイリストで推されるのは一曲だけ。",
            "Spotifyが選ぶ曲にはBPMやキーの一貫性がない。",
            "本当のシャッフル機能がない。",
            "無料版は本当に使えない。アーティストに収益をもたらす必要があるのは分かるけど、プレミアム版だけを提供した方がいいかも。広告はいいけど、たくさんの機能が課金でロックされてる。",
            "ポッドキャスト、何それ？ここは音楽プラットフォームのはずじゃないの？"
        ],
        bodyFooter: "<a href=\"https://github.com/untanukii\" target=\"_blank\">tanukii</a> & <a href=\"https://github.com/steventedyt\" target=\"_blank\">StevenTed</a> が作ったよ <br> このページが気に入ったら、<a href=\"https://github.com/steventedyt/whyspotifysucks\" target=\"_blank\">GithUwUb~</a> でスターをつけてね"
    }    
};  

const sources = {
    "2":{
        "format":'[%LINK%]',
        "sources":[{
            "link": "https://www.theguardian.com/commentisfree/2023/nov/30/spotify-smaller-artists-wrapped-indie-musicians",
            "texts": {
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
    "4":{
        "format":'[%LINK%]',
        "sources":[{
            "link": "https://www.theverge.com/2023/9/5/23860124/spotify-lyrics-premium-only-feature",
            "texts": {
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
    "6":{
        "format":'%LINK%',
        "sources":[{
            "link": "https://www.theverge.com/2023/9/5/23860124/spotify-lyrics-premium-only-feature",
            "texts": {
                "en":"here",
                "fr":"ici",
                "es":"aquí",
                "de":"hier",
                "ja":"ここ"
            }
        }]
    },
    "7":{
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://www.theverge.com/2024/5/3/24147887/spotify-hifi-lossless-audio-music-streaming-ui-leak",
            "texts":{
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        },{
            "link":"https://en.wikipedia.org/wiki/Comparison_of_music_streaming_services",
            "texts":{
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
    "8":{
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://www.usemogul.com/post/does-spotify-have-dolby-atmos",
            "texts":{
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
    "13": {
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://en.wikipedia.org/wiki/Daniel_Ek",
            "texts": {
                "en":'source: "and later started Advertigo, an online advertising company"',
                "fr":'source: "and later started Advertigo, an online advertising company"',
                "es":'fuente: "and later started Advertigo, an online advertising company"',
                "de":'Quelle: "and later started Advertigo, an online advertising company"',
                "ja":'ソース: "and later started Advertigo, an online advertising company"'
            }
        }, {
            "link":"https://en.wikipedia.org/wiki/Martin_Lorentzon",
            "texts": {
                "en":'source: "Sven Hans Martin Lorentzon [...] is [...] co-founder of Tradedoubler" & "In March 2006 Tradedoubler bought advertising service Advertigo, created by Daniel Ek',
                "fr":'source: "Sven Hans Martin Lorentzon [...] is [...] co-founder of Tradedoubler" & "In March 2006 Tradedoubler bought advertising service Advertigo, created by Daniel Ek',
                "es":'fuente: "Sven Hans Martin Lorentzon [...] is [...] co-founder of Tradedoubler" & "In March 2006 Tradedoubler bought advertising service Advertigo, created by Daniel Ek',
                "de":'Quelle: "Sven Hans Martin Lorentzon [...] is [...] co-founder of Tradedoubler" & "In March 2006 Tradedoubler bought advertising service Advertigo, created by Daniel Ek',
                "ja":'ソース: "Sven Hans Martin Lorentzon [...] is [...] co-founder of Tradedoubler" & "In March 2006 Tradedoubler bought advertising service Advertigo, created by Daniel Ek'
            }
        }]
    },
    "14": {
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://www.headphonesty.com/2024/04/spotify-lowers-artist-royalties-subscription-price-hike/",
            "texts":{
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
    "17": {
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://support.spotify.com/us/artists/article/pitching-music-to-playlist-editors/",
            "texts":{
                "en":'source: "You can only pitch one song at a time"',
                "fr":'source: "You can only pitch one song at a time"',
                "es":'fuente: "You can only pitch one song at a time"',
                "de":'Quelle: "You can only pitch one song at a time"',
                "ja":'ソース: "You can only pitch one song at a time"'
            }
        }]
    },
    "19": {
        "format":'[%LINK%]',
        "sources":[{
            "link":"https://www.reddit.com/r/truespotify/comments/12tfig9/do_i_have_to_just_accept_spotifys_shuffle_doesnt/",
            "texts":{
                "en":"source",
                "fr":"source",
                "es":"fuente",
                "de":"Quelle",
                "ja":"ソース"
            }
        }]
    },
}

function addSources(index, elementValue, lang) {
    if(sources[`${index+1}`]) {
        const validSources = [];
        for (let i = 0; i < sources[`${index+1}`]['sources'].length; i++){
            validSources.push(`<a href="${sources[`${index+1}`]['sources'][i]['link']}" target="_blank">${sources[`${index+1}`]['sources'][i]['texts'][lang]}</a>`);
        }
        elementValue.innerHTML += ' ' + sources[`${index+1}`]['format'].replace(/%LINK%/g, `${validSources.join(', ')}`);
    }
}

function changeLanguage() {
    const content = document.querySelector('.content');
    const lang = document.documentElement.lang;
    if(lang === 'en') {
        const elements = Array.from(document.querySelectorAll('.content p')).filter(e => !e.classList.contains('subtitle'))
        elements.forEach((element, index) => {
            addSources(index, element, lang);
        });
        return;
    };
    content.innerHTML = '';
    //Head
    document.title = translations[lang]['headTitle'];
    const metaDescription = document.querySelector('meta[name="description"]');
    metaDescription.setAttribute('content', translations[lang]['headDescription']);
    //Body
    const title = document.createElement('h1');
    title.textContent = translations[lang]['bodyTitle'];
    content.appendChild(title);
    const subtitle = document.createElement('p');
    subtitle.classList.add('subtitle');
    subtitle.textContent = translations[lang]['bodySubtitle'];
    content.appendChild(subtitle);
    translations[lang]['bodyElements'].forEach((element, index) => {
        const elementKey = document.createElement('h3');
        elementKey.textContent = `${index+1}.`;
        content.appendChild(elementKey);
        const elementValue = document.createElement('p');
        elementValue.innerHTML = element;
        addSources(index, elementValue, lang);
        content.appendChild(elementValue);
    });
    const footer = document.querySelector('footer p');
    footer.innerHTML = translations[lang]['bodyFooter'];
};

document.addEventListener('DOMContentLoaded', () => {
    const userLang = Object.keys(translations).find(lang => (navigator.language).includes(lang)) || 'en';
    document.documentElement.lang = userLang;
    changeLanguage();
    document.addEventListener('keydown', function(event) {
        if (event.code === 'Space') {
            event.preventDefault();
            const audio = document.getElementById('music');
            if(audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
        }else if (event.code === 'ArrowUp') {
            event.preventDefault();
            const audio = document.getElementById('music');
            audio.volume += 0.1;
        }else if (event.code === 'ArrowDown') {
            event.preventDefault();
            const audio = document.getElementById('music');
            audio.volume -= 0.1;
        }
    });
});  